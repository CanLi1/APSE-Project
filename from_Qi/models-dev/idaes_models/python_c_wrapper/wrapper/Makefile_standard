CC = gcc
CXX = g++
RM = rm
CP = cp

# Adding include paths to Docker setup :  
# The following paths are all hardcoded to the Docker setup!
INCLUDE = -I/home/jovyan/ADOL-C-2.6.2/ADOL-C/include \
-I/usr/local/src/Ipopt-3.12.5/ThirdParty/ASL/solvers -I/usr/local/src/Ipopt-3.12.5/ThirdParty/ASL \
-I/opt/conda/pkgs/python-2.7.12-0/include/python2.7
CFLAGS = -c -Wall -Wextra -fPIC -std=c++11
LDFLAGS = -L/usr/local/lib64 -ladolc -shared -lm -lpython2.7

ALL: libwrapper.so test_wrapper

libwrapper.o: wrapper.c
	$(CXX) $(CFLAGS) $(INCLUDE) wrapper.c -o libwrapper.o

libwrapper.so: libwrapper.o
	$(CXX) $(LDFLAGS) libwrapper.o -o libwrapper.so
	$(RM) libwrapper.o

test_wrapper: test_wrapper.c
	$(CC) -Wall -fPIC $(INCLUDE) -L. -lwrapper -I. test_wrapper.c -o test_wrapper
	 # -lwrapper 

#test_wrapper: test_wrapper.o
#	$(CXX) $(LDFLAGS) test_wrapper.o -o test_wrapper
#	$(RM) test_wrapper.o

clean:
	$(RM) -f *.o
	$(RM) -f *.so
	$(RM) -f test_wrapper

    
